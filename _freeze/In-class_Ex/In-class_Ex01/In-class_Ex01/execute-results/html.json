{
  "hash": "7de0130122dbd5b8f402ff29c6e0edd4",
  "result": {
    "markdown": "---\ntitle: \"In-class_Ex01\"\nauthor: \"NeoYX\"\neditor: visual\nexecute: \n  freeze: auto\n  warning: false\n  #echo: false\n  html:\n    code-fold: false\n    code-overflow: scroll\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n---\n\n\n# In-class Exercise 1: Programming Elegant DataVis with ggplot2\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman:: p_load(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"data1/Exam_data.csv\")\n```\n:::\n\n\n## Task 1: Plotting a bar chart\n\nIn this section, I will explore the theme_minimal() and change the gridline colours.\n\nReference website : [R bloggers](https://www.r-bloggers.com/2022/07/how-to-change-background-color-in-ggplot2-3/) (How to change the background colour of ggplot2?)\n\nTo modify components of a theme , refer to this ggplot2 [webpage](https://ggplot2.tidyverse.org/reference/theme.html)\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x=RACE)) +\n  geom_bar() +\n  coord_flip() +\n  theme_minimal() +\n  theme(panel.background = element_rect(fill ='lightblue', color ='black', linetype = 'dotted'),\n        panel.grid.major = element_line (color= 'red', linetype = 'dotted'),\n        panel.grid.minor = element_line (colour='green', size= 2, linetype = 'dotted'),\n        plot.title= element_text(size=rel(2))) +\n  ggtitle('Number of students by Race') +\n  labs(y='Number of students')\n```\n:::\n\n:::\n\n## Task 2: Improve the data visualisation of an existing simple vertical bar chart\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=RACE)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n**There are several flaws in the design above, namely:**\n\n1.  y-axis label is not clear (i.e. count)\n\n2.  To support effective comparison, the bars should be sorted by their respective frequencies.\n\n3.  For static graph, frequency values should be added to provide addition information. (labelled on the graph)\n\nThe design below is an improvised version with the following features:\n\n1.  Both axes labelled clearly.\n\n2.  Bars are sorted by - count (descending order).\n\n3.  Count and percentage are labelled above the bars.\n\n::: panel-tabset\n#### The makeover design\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n#### The code chunk (NYX)\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 Ã— 2\n  RACE    count\n  <chr>   <int>\n1 Chinese   193\n2 Indian     12\n3 Malay     108\n4 Others      9\n```\n:::\n:::\n\nTHe output of the code below is C,M,I O\n\n::: {.cell}\n\n```{.r .cell-code}\nt <- exam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n())\n\nreorder(t$RACE, (-t$count))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] Chinese Indian  Malay   Others \nattr(,\"scores\")\nChinese  Indian   Malay  Others \n   -193     -12    -108      -9 \nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n()) %>% \n  ggplot(aes(x = reorder(RACE, (-count)), y = count)) +\n  geom_bar(stat = 'identity', color='black', fill = '#DD8888') +\n  ylim(0,220) +\n  geom_text(aes(label = paste0(count,', ', round(count/sum(count)*100,1), '%')),\n            position = position_dodge(width = 0.8), vjust= -1, size = 3.5) +\n  ggtitle('Distribution of Race') +\n  labs(y='No. \\nof \\nPupils', x = 'Race') +\n  theme(plot.title = element_text(face='bold', hjust = 0.5),   #bold title and center-justify\n        axis.title.y=element_text(angle=0)) \n```\n:::\n\n\n[Meaning of the argument 'identity' in the 'stat' parameter:]{.underline}\n\nIf we provide the argument stat=\"identity\" to geom_bar() then we're telling R to calculate the sum of the y variable, grouped by the x variable and use bars to display the sums\n\nThere are three arguments in the reorder() function. \n(1) categorical variable to be sorted\n(2) variable to sort (1) by\n(3) a function that returns numerical value on how to sort (1) by\n\nReferences:\n\nhttps://www.roelpeters.be/reorder-ggplot2-bar-chart-by-count/ http://www.sthda.com/english/wiki/ggplot2-barplots-quick-start-guide-r-software-and-data-visualization#bar-plot-with-labels\n\n\n\n\n#### The code chunk (Prof Kam)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n       aes(x=reorder(RACE,RACE,\n                     function(x)-length(x)))) +\n  geom_bar() +\n  ylim(0,220) +\n  geom_text(stat=\"count\", \n      aes(label=paste0(..count.., \", \", \n      round(..count../sum(..count..)*100, 1), \"%\")),\n      vjust=-1) +\n  xlab(\"Race\") +\n  ylab(\"No. of\\nPupils\") +\n  theme(axis.title.y=element_text(angle = 0))\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n#### Understanding Reorder()\n\n```         \nOutput of the code below is C,M,I,O\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreorder(exam_data$RACE,exam_data$RACE,function(x)-length(x))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] Malay   Malay   Chinese Chinese Malay   Malay   Chinese Malay   Malay  \n [10] Indian  Chinese Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n [19] Malay   Malay   Malay   Malay   Chinese Others  Malay   Malay   Malay  \n [28] Malay   Indian  Indian  Malay   Malay   Chinese Malay   Chinese Malay  \n [37] Chinese Chinese Malay   Chinese Malay   Malay   Malay   Malay   Malay  \n [46] Chinese Chinese Chinese Indian  Malay   Chinese Chinese Chinese Malay  \n [55] Chinese Chinese Chinese Malay   Chinese Chinese Malay   Indian  Malay  \n [64] Chinese Malay   Malay   Malay   Malay   Chinese Chinese Malay   Malay  \n [73] Malay   Chinese Malay   Chinese Malay   Malay   Malay   Indian  Malay  \n [82] Malay   Chinese Chinese Malay   Indian  Chinese Chinese Chinese Chinese\n [91] Malay   Malay   Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n[100] Malay   Chinese Chinese Chinese Chinese Malay   Chinese Chinese Others \n[109] Indian  Chinese Malay   Chinese Malay   Malay   Chinese Malay   Chinese\n[118] Chinese Chinese Chinese Malay   Malay   Malay   Chinese Malay   Malay  \n[127] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Malay   Chinese\n[136] Chinese Malay   Others  Malay   Chinese Chinese Malay   Chinese Chinese\n[145] Chinese Malay   Chinese Chinese Malay   Others  Malay   Chinese Malay  \n[154] Malay   Chinese Chinese Malay   Chinese Others  Malay   Malay   Malay  \n[163] Malay   Chinese Malay   Chinese Chinese Others  Malay   Chinese Chinese\n[172] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[181] Malay   Chinese Chinese Chinese Chinese Chinese Chinese Chinese Malay  \n[190] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Indian  Malay  \n[199] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[208] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[217] Chinese Chinese Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[226] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese\n[235] Chinese Malay   Chinese Chinese Malay   Chinese Malay   Malay   Malay  \n[244] Chinese Chinese Indian  Malay   Others  Malay   Chinese Chinese Chinese\n[253] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese\n[262] Chinese Chinese Malay   Chinese Chinese Malay   Chinese Chinese Malay  \n[271] Chinese Malay   Chinese Others  Chinese Chinese Malay   Malay   Malay  \n[280] Chinese Indian  Chinese Chinese Chinese Chinese Chinese Malay   Chinese\n[289] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[298] Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[307] Chinese Chinese Chinese Indian  Chinese Chinese Malay   Chinese Chinese\n[316] Chinese Chinese Chinese Others  Chinese Chinese Chinese\nattr(,\"scores\")\nChinese  Indian   Malay  Others \n   -193     -12    -108      -9 \nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n#### Forcats package\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  mutate(RACE = fct_infreq(RACE)) %>%\n  ggplot(aes(x = RACE)) + \n  geom_bar()+\n  ylim(0,220) +\n  geom_text(stat=\"count\", \n      aes(label=paste0(..count.., \", \", \n      round(..count../sum(..count..)*100,\n            1), \"%\")),\n      vjust=-1) +\n  xlab(\"Race\") +\n  ylab(\"No. of\\nPupils\") +\n  theme(axis.title.y=element_text(angle = 0))\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n#### Understanding fct_infreq\n```         \nOutput of the code below is also C,M,I,O\n```\n\n::: {.cell}\n\n```{.r .cell-code}\nfct_infreq(exam_data$RACE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] Malay   Malay   Chinese Chinese Malay   Malay   Chinese Malay   Malay  \n [10] Indian  Chinese Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n [19] Malay   Malay   Malay   Malay   Chinese Others  Malay   Malay   Malay  \n [28] Malay   Indian  Indian  Malay   Malay   Chinese Malay   Chinese Malay  \n [37] Chinese Chinese Malay   Chinese Malay   Malay   Malay   Malay   Malay  \n [46] Chinese Chinese Chinese Indian  Malay   Chinese Chinese Chinese Malay  \n [55] Chinese Chinese Chinese Malay   Chinese Chinese Malay   Indian  Malay  \n [64] Chinese Malay   Malay   Malay   Malay   Chinese Chinese Malay   Malay  \n [73] Malay   Chinese Malay   Chinese Malay   Malay   Malay   Indian  Malay  \n [82] Malay   Chinese Chinese Malay   Indian  Chinese Chinese Chinese Chinese\n [91] Malay   Malay   Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n[100] Malay   Chinese Chinese Chinese Chinese Malay   Chinese Chinese Others \n[109] Indian  Chinese Malay   Chinese Malay   Malay   Chinese Malay   Chinese\n[118] Chinese Chinese Chinese Malay   Malay   Malay   Chinese Malay   Malay  \n[127] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Malay   Chinese\n[136] Chinese Malay   Others  Malay   Chinese Chinese Malay   Chinese Chinese\n[145] Chinese Malay   Chinese Chinese Malay   Others  Malay   Chinese Malay  \n[154] Malay   Chinese Chinese Malay   Chinese Others  Malay   Malay   Malay  \n[163] Malay   Chinese Malay   Chinese Chinese Others  Malay   Chinese Chinese\n[172] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[181] Malay   Chinese Chinese Chinese Chinese Chinese Chinese Chinese Malay  \n[190] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Indian  Malay  \n[199] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[208] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[217] Chinese Chinese Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[226] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese\n[235] Chinese Malay   Chinese Chinese Malay   Chinese Malay   Malay   Malay  \n[244] Chinese Chinese Indian  Malay   Others  Malay   Chinese Chinese Chinese\n[253] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese\n[262] Chinese Chinese Malay   Chinese Chinese Malay   Chinese Chinese Malay  \n[271] Chinese Malay   Chinese Others  Chinese Chinese Malay   Malay   Malay  \n[280] Chinese Indian  Chinese Chinese Chinese Chinese Chinese Malay   Chinese\n[289] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[298] Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[307] Chinese Chinese Chinese Indian  Chinese Chinese Malay   Chinese Chinese\n[316] Chinese Chinese Chinese Others  Chinese Chinese Chinese\nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n\n#### Another boxplot example\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = exam_data, aes(x = reorder(RACE, -MATHS, median), y = MATHS)) +\n  geom_boxplot() +\n  xlab(\"Race\") +\n  ylab(\"Math Score\") +\n  ggtitle(\"Math Scores by Race\") +\n  theme(plot.title = element_text(hjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n:::\n\n\n\n\n",
    "supporting": [
      "In-class_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}