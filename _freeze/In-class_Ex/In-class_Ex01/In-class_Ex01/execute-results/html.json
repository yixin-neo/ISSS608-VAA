{
  "hash": "bd0eb3ac4897f2e76efc26b007e0a260",
  "result": {
    "markdown": "---\ntitle: \"In-class_Ex01\"\nauthor: \"NeoYX\"\neditor: visual\nexecute: \n  freeze: auto\n  warning: false\n  #echo: false\n  html:\n    code-fold: false\n    code-overflow: scroll\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n---\n\n\n# In-class Exercise 1: Programming Elegant DataVis with ggplot2\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman:: p_load(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data <- read_csv(\"data1/Exam_data.csv\")\n```\n:::\n\n\n## Task 1: Plotting a bar chart\n\nIn this section, I will explore the theme_minimal() and modify the components of a theme (e.g. plot fill and gridline colours).\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x=RACE)) +\n  geom_bar() +\n  coord_flip() +\n  theme_minimal() +\n  theme(panel.background = element_rect(fill ='lavender', color ='white',linetype ='solid'),\n        panel.grid.major = element_line (color= 'white', linetype = 'solid'),\n        panel.grid.minor = element_line (colour='white', size= 0.2, linetype = 'solid'),\n        plot.title= element_text(size=rel(1.5))) +\n  ggtitle('Number of students by Race') +\n  labs(y='Number of students')\n```\n:::\n\n\nReference website : [R bloggers](https://www.r-bloggers.com/2022/07/how-to-change-background-color-in-ggplot2-3/) (How to change the background colour of ggplot2?)\n\nTo modify components of a theme , refer to this ggplot2 [webpage](https://ggplot2.tidyverse.org/reference/theme.html)\n:::\n\n\n\n## Task 2: Improve the data visualisation of an existing simple vertical bar chart\n\n\n**There are several flaws in the design below, namely:**\n\n1.  y-axis label is not clear (i.e. count)\n\n2.  To support effective comparison, the bars should be sorted by their respective frequencies.\n\n3.  For static graph, frequency values should be added to provide addition information. (labelled on the graph)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=RACE)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n**The designs below are improvised versions with the following features:**\n\n1.  Both axes labelled clearly.\n\n2.  Bars are sorted by - count (descending order).\n\n3.  Count and percentage are labelled above the bars.\n\n::: panel-tabset\n#### Makeover 1 (NYX)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 1 code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 Ã— 2\n  RACE    count\n  <chr>   <int>\n1 Chinese   193\n2 Indian     12\n3 Malay     108\n4 Others      9\n```\n:::\n:::\n\n\nTHe output of the code below is C,M,I O\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt <- exam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n())\n\nreorder(t$RACE, (-t$count))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] Chinese Indian  Malay   Others \nattr(,\"scores\")\nChinese  Indian   Malay  Others \n   -193     -12    -108      -9 \nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  group_by(RACE) %>% \n  summarise(count = n()) %>% \n  ggplot(aes(x = reorder(RACE, (-count)), y = count)) +\n  geom_bar(stat = 'identity', color='black', fill = '#DD8888') +\n  ylim(0,220) +\n  geom_text(aes(label = paste0(count,', ', round(count/sum(count)*100,1), '%')),\n            position = position_dodge(width = 0.8), vjust= -1, size = 3.5) +\n  ggtitle('Distribution of Race') +\n  labs(y='No. \\nof \\nPupils', x = 'Race') +\n  theme(plot.title = element_text(face='bold', hjust = 0.5),   #bold title and center-justify\n        axis.title.y=element_text(angle=0)) \n```\n:::\n\n\n*Meaning of the argument 'identity' in the 'stat' parameter:*\n\nIf we provide the argument stat=\"identity\" to geom_bar() then we're telling R to calculate the sum of the y variable, grouped by the x variable and use bars to display the sums\n\nThere are three arguments in the reorder() function. \n\n(1) categorical variable to be sorted \n\n(2) variable to sort (1) by \n\n(3) a function that returns numerical value on how to sort (1) by\n\nReferences:\n\nhttps://www.roelpeters.be/reorder-ggplot2-bar-chart-by-count/ http://www.sthda.com/english/wiki/ggplot2-barplots-quick-start-guide-r-software-and-data-visualization#bar-plot-with-labels\n\n:::\n\n::: panel-tabset\n\n#### Makeover 2 (Prof)\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 2 code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n       aes(x=reorder(RACE,RACE,\n                     function(x)-length(x)))) +\n  geom_bar() +\n  ylim(0,220) +\n  geom_text(stat=\"count\", \n      aes(label=paste0(..count.., \", \", \n      round(..count../sum(..count..)*100, 1), \"%\")),\n      vjust=-1) +\n  xlab(\"Race\") +\n  ylab(\"No. of\\nPupils\") +\n  theme(axis.title.y=element_text(angle = 0))\n```\n:::\n\n\n#### Understanding Reorder()\n\n```         \nOutput of the code below is C,M,I,O\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreorder(exam_data$RACE,exam_data$RACE,function(x)-length(x))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] Malay   Malay   Chinese Chinese Malay   Malay   Chinese Malay   Malay  \n [10] Indian  Chinese Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n [19] Malay   Malay   Malay   Malay   Chinese Others  Malay   Malay   Malay  \n [28] Malay   Indian  Indian  Malay   Malay   Chinese Malay   Chinese Malay  \n [37] Chinese Chinese Malay   Chinese Malay   Malay   Malay   Malay   Malay  \n [46] Chinese Chinese Chinese Indian  Malay   Chinese Chinese Chinese Malay  \n [55] Chinese Chinese Chinese Malay   Chinese Chinese Malay   Indian  Malay  \n [64] Chinese Malay   Malay   Malay   Malay   Chinese Chinese Malay   Malay  \n [73] Malay   Chinese Malay   Chinese Malay   Malay   Malay   Indian  Malay  \n [82] Malay   Chinese Chinese Malay   Indian  Chinese Chinese Chinese Chinese\n [91] Malay   Malay   Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n[100] Malay   Chinese Chinese Chinese Chinese Malay   Chinese Chinese Others \n[109] Indian  Chinese Malay   Chinese Malay   Malay   Chinese Malay   Chinese\n[118] Chinese Chinese Chinese Malay   Malay   Malay   Chinese Malay   Malay  \n[127] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Malay   Chinese\n[136] Chinese Malay   Others  Malay   Chinese Chinese Malay   Chinese Chinese\n[145] Chinese Malay   Chinese Chinese Malay   Others  Malay   Chinese Malay  \n[154] Malay   Chinese Chinese Malay   Chinese Others  Malay   Malay   Malay  \n[163] Malay   Chinese Malay   Chinese Chinese Others  Malay   Chinese Chinese\n[172] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[181] Malay   Chinese Chinese Chinese Chinese Chinese Chinese Chinese Malay  \n[190] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Indian  Malay  \n[199] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[208] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[217] Chinese Chinese Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[226] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese\n[235] Chinese Malay   Chinese Chinese Malay   Chinese Malay   Malay   Malay  \n[244] Chinese Chinese Indian  Malay   Others  Malay   Chinese Chinese Chinese\n[253] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese\n[262] Chinese Chinese Malay   Chinese Chinese Malay   Chinese Chinese Malay  \n[271] Chinese Malay   Chinese Others  Chinese Chinese Malay   Malay   Malay  \n[280] Chinese Indian  Chinese Chinese Chinese Chinese Chinese Malay   Chinese\n[289] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[298] Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[307] Chinese Chinese Chinese Indian  Chinese Chinese Malay   Chinese Chinese\n[316] Chinese Chinese Chinese Others  Chinese Chinese Chinese\nattr(,\"scores\")\nChinese  Indian   Malay  Others \n   -193     -12    -108      -9 \nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n\n:::\n\n:::panel-tabset\n\n#### Makeover 3 (Forcats package)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 3 code chunk\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_data %>%\n  mutate(RACE = fct_infreq(RACE)) %>%\n  ggplot(aes(x = RACE)) + \n  geom_bar()+\n  ylim(0,220) +\n  geom_text(stat=\"count\", \n      aes(label=paste0(..count.., \", \", \n      round(..count../sum(..count..)*100,\n            1), \"%\")),\n      vjust=-1) +\n  xlab(\"Race\") +\n  ylab(\"No. of\\nPupils\") +\n  theme(axis.title.y=element_text(angle = 0))\n```\n:::\n\n#### Understanding fct_infreq\n\n```         \nOutput of the code below is also C,M,I,O\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfct_infreq(exam_data$RACE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] Malay   Malay   Chinese Chinese Malay   Malay   Chinese Malay   Malay  \n [10] Indian  Chinese Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n [19] Malay   Malay   Malay   Malay   Chinese Others  Malay   Malay   Malay  \n [28] Malay   Indian  Indian  Malay   Malay   Chinese Malay   Chinese Malay  \n [37] Chinese Chinese Malay   Chinese Malay   Malay   Malay   Malay   Malay  \n [46] Chinese Chinese Chinese Indian  Malay   Chinese Chinese Chinese Malay  \n [55] Chinese Chinese Chinese Malay   Chinese Chinese Malay   Indian  Malay  \n [64] Chinese Malay   Malay   Malay   Malay   Chinese Chinese Malay   Malay  \n [73] Malay   Chinese Malay   Chinese Malay   Malay   Malay   Indian  Malay  \n [82] Malay   Chinese Chinese Malay   Indian  Chinese Chinese Chinese Chinese\n [91] Malay   Malay   Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n[100] Malay   Chinese Chinese Chinese Chinese Malay   Chinese Chinese Others \n[109] Indian  Chinese Malay   Chinese Malay   Malay   Chinese Malay   Chinese\n[118] Chinese Chinese Chinese Malay   Malay   Malay   Chinese Malay   Malay  \n[127] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Malay   Chinese\n[136] Chinese Malay   Others  Malay   Chinese Chinese Malay   Chinese Chinese\n[145] Chinese Malay   Chinese Chinese Malay   Others  Malay   Chinese Malay  \n[154] Malay   Chinese Chinese Malay   Chinese Others  Malay   Malay   Malay  \n[163] Malay   Chinese Malay   Chinese Chinese Others  Malay   Chinese Chinese\n[172] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[181] Malay   Chinese Chinese Chinese Chinese Chinese Chinese Chinese Malay  \n[190] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Indian  Malay  \n[199] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[208] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[217] Chinese Chinese Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[226] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese\n[235] Chinese Malay   Chinese Chinese Malay   Chinese Malay   Malay   Malay  \n[244] Chinese Chinese Indian  Malay   Others  Malay   Chinese Chinese Chinese\n[253] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese\n[262] Chinese Chinese Malay   Chinese Chinese Malay   Chinese Chinese Malay  \n[271] Chinese Malay   Chinese Others  Chinese Chinese Malay   Malay   Malay  \n[280] Chinese Indian  Chinese Chinese Chinese Chinese Chinese Malay   Chinese\n[289] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[298] Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[307] Chinese Chinese Chinese Indian  Chinese Chinese Malay   Chinese Chinese\n[316] Chinese Chinese Chinese Others  Chinese Chinese Chinese\nLevels: Chinese Malay Indian Others\n```\n:::\n:::\n\n:::\n\nSorting a boxplot by median of Math scores using reorder().\n\nIn the viz below, we are able to achieve several things in one go\n\n1. sort the boxplot by median of the Math scores in descending order.\n\n2. add mean value by Race\n\n3. use colours to distinguish between outliers and jitters\n\n::: panel-tabset\n#### Boxplot design\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n#### Code Chunk\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = exam_data, aes(x = reorder(RACE, -MATHS, median), y = MATHS, fill=RACE)) +\n   geom_boxplot(outlier.colour=\"blue\", outlier.size=1) +\n   geom_point(position = 'jitter',size=0.5) +\n   stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, color=\"pink\", fill=\"red\") +\n   xlab(\"Race\") +\n   ylab(\"Math Score\") +\n   ggtitle(\"Math Scores by Race\") +\n   scale_fill_brewer(palette='Set2') +\n   theme(plot.title = element_text(hjust = 0.5),\n         legend.position = 'none')\n```\n:::\n\nReference: [Link](https://r-graph-gallery.com/index.html)\n\n#### Reorder()\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nreorder(exam_data$RACE, -exam_data$MATHS, median)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] Malay   Malay   Chinese Chinese Malay   Malay   Chinese Malay   Malay  \n [10] Indian  Chinese Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n [19] Malay   Malay   Malay   Malay   Chinese Others  Malay   Malay   Malay  \n [28] Malay   Indian  Indian  Malay   Malay   Chinese Malay   Chinese Malay  \n [37] Chinese Chinese Malay   Chinese Malay   Malay   Malay   Malay   Malay  \n [46] Chinese Chinese Chinese Indian  Malay   Chinese Chinese Chinese Malay  \n [55] Chinese Chinese Chinese Malay   Chinese Chinese Malay   Indian  Malay  \n [64] Chinese Malay   Malay   Malay   Malay   Chinese Chinese Malay   Malay  \n [73] Malay   Chinese Malay   Chinese Malay   Malay   Malay   Indian  Malay  \n [82] Malay   Chinese Chinese Malay   Indian  Chinese Chinese Chinese Chinese\n [91] Malay   Malay   Malay   Chinese Chinese Chinese Chinese Malay   Malay  \n[100] Malay   Chinese Chinese Chinese Chinese Malay   Chinese Chinese Others \n[109] Indian  Chinese Malay   Chinese Malay   Malay   Chinese Malay   Chinese\n[118] Chinese Chinese Chinese Malay   Malay   Malay   Chinese Malay   Malay  \n[127] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Malay   Chinese\n[136] Chinese Malay   Others  Malay   Chinese Chinese Malay   Chinese Chinese\n[145] Chinese Malay   Chinese Chinese Malay   Others  Malay   Chinese Malay  \n[154] Malay   Chinese Chinese Malay   Chinese Others  Malay   Malay   Malay  \n[163] Malay   Chinese Malay   Chinese Chinese Others  Malay   Chinese Chinese\n[172] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[181] Malay   Chinese Chinese Chinese Chinese Chinese Chinese Chinese Malay  \n[190] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Indian  Malay  \n[199] Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese Chinese\n[208] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[217] Chinese Chinese Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[226] Chinese Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese\n[235] Chinese Malay   Chinese Chinese Malay   Chinese Malay   Malay   Malay  \n[244] Chinese Chinese Indian  Malay   Others  Malay   Chinese Chinese Chinese\n[253] Chinese Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese\n[262] Chinese Chinese Malay   Chinese Chinese Malay   Chinese Chinese Malay  \n[271] Chinese Malay   Chinese Others  Chinese Chinese Malay   Malay   Malay  \n[280] Chinese Indian  Chinese Chinese Chinese Chinese Chinese Malay   Chinese\n[289] Chinese Chinese Chinese Chinese Malay   Chinese Chinese Chinese Chinese\n[298] Chinese Malay   Malay   Chinese Chinese Chinese Chinese Chinese Chinese\n[307] Chinese Chinese Chinese Indian  Chinese Chinese Malay   Chinese Chinese\n[316] Chinese Chinese Chinese Others  Chinese Chinese Chinese\nattr(,\"scores\")\nChinese  Indian   Malay  Others \n  -79.0   -58.5   -61.5   -70.0 \nLevels: Chinese Others Malay Indian\n```\n:::\n:::\n\n:::\n\n## Task 3: Improve the data viz of an existing histogram\n\n**There are several flaws in the design below, namely:** \n\n1. The outline of the bars is unclear\n\n2.  Unable to see how the scores are binned\n\n3.  Addition of reference line (e.g. 75th percentile) will help users get a better understanding of the data.   \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=MATHS)) +\n  geom_histogram(binwidth=5)\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n**The designs below are improvised version with the following features:**\n\nMakeover 1: \n\n- Includes the 50th and 75th percentile line in the plot.\n\nMakeover 2:\n\n- Adding mean and median lines on the histogram plot.\n\n- Change fill color and line color\n\n\n::: panel-tabset\n#### Makeover design 1 (NYX)\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 1 code chunk (NYX)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq <- quantile(exam_data$MATHS, probs = c(0.25, 0.5, 0.75))\n\nggplot(data=exam_data,\n  aes(x=MATHS)) +\n  geom_histogram(binwidth = 5, color='black',size= 0.3, fill = '#DD8888') +\n  geom_vline(xintercept = q[2], linetype='dotted', size = 0.8, color='blue') +\n  geom_vline(xintercept = q[3], linetype='dotted', size = 0.8) +\n  annotate('text' , x= 70, y=50, label='50th \\npercentile', size = 3) +\n  annotate('text' , x= 90, y=50, label='75th \\npercentile', size = 3) +\n  labs(y= 'No. of \\nPupils', x='math Score') +\n  theme(axis.title.y=element_text(angle = 0)) +\n  ggtitle('Distribution of Math scores')\n```\n:::\n\n\nReference: [link](https://community.rstudio.com/t/geom-histogram-labeling-25th-50th-75th-percentiles/148838/2)\n:::\n\n:::panel-tabset\n#### Makeover Design 2 (Adapted from Prof)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 2 code chunk\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data, \n       aes(x= MATHS)) +\n  geom_histogram(bins=20, \n                 color=\"black\", \n                 fill=\"light blue\") +\n  geom_vline(aes(xintercept = mean(MATHS, na.rm=T)),\n             color='red',\n             linetype = 'dashed',\n             size = 1) +\n  annotate(\"text\", x=65, y=50, label=\"mean\", angle=0, size = 4) +\n  geom_vline(aes(xintercept = median(MATHS, na.rm=T)),\n             color='gray30',\n             linetype = 'dashed',\n             size = 1) +\n  annotate(\"text\", x=79, y=50, label=\"median\", angle=0, size = 4)\n```\n:::\n\n\n\n:::\n\n## Task 4: Improve the data viz of exisiting distribution of English scores by gender.\n\nThe viz below shows the distribution by gender. How can we make it more informative? Could we try to add a background layer of histogram that describe the overall distribution of ENGLISH scores?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=ENGLISH, fill= GENDER)) +\n  geom_histogram(bins=20) +\n  facet_wrap(~GENDER)\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\nThe makeover design below now include overall distribution in the backgrounds of the trellis plots by gender. \n\n\n::: panel-tabset\n#### Makeover design 1\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n#### Makeover 1 code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd_bg <- exam_data[, -3]  # background data without GENDER column\nggplot(data=exam_data,\n       aes(x=ENGLISH, fill=GENDER)) +\n  geom_histogram(data=d_bg, bins=20, fill='grey',alpha=0.5) +\n  geom_histogram(colour='black') +\n  facet_wrap(~GENDER) +\n  guides(fill=FALSE) + \n  theme_minimal() +\n  labs(y= 'No. of \\nPupils', x='English Score') +\n  theme(axis.title.y=element_text(angle = 0)) +\n  ggtitle('Distribution of English scores by Gender')\n```\n:::\n\n\nThe geom_histogram() function is used twice to create two overlapping histograms. \n\nThe first histogram is created using the d_bg dataset (no GENDER data, rep all GENDERs) and is filled with grey. This histogram represents the background distribution of ENGLISH marks across ALL GENDERs. \n\nThe second histogram is created using the entire exam dataset and makes use of the fill = GENDER in ggplot() to color gender differently. This results in a legend and is removed with guides(fill=FALSE). It also has a black border. This histogram represents the distribution of ENGLISH scores for each individual GENDER. \n\nFinally, facet_wrap(~GENDER) will create panels to represent distribution for each GENDER for easy comparison.\n\nReference: [Plot background histogram data](https://drsimonj.svbtle.com/plotting-background-data-for-groups-with-ggplot2) \n\n:::\n\n## Task 5: Improve the existing scatterplot of English against Math scores\n\nThe original design below has several flaws:\n\n1.  The limits and scale ticks of both axes are inconsistent. \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\nThe improvised design in Makeover 1 now includes:\n\n1. Common x and Y axes scale and range.\n\n2. Reference lines at 50 marks for both subjects.\n\n\n::: panel-tabset\n\n#### Makeover 1\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n#### Makeover 1 code chunk\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point() +\n  ylim(0,100) +\n  xlim(0,100) +\n  geom_vline(xintercept=50, linetype='dashed') +\n  geom_hline(yintercept=50, linetype='dashed')\n```\n:::\n\n:::\n\nIn makeover 2, I have included a third numerical variable, Science score into the scatterplot.\n\nThe position of the legend has been shifted to the bottom.\n\n\nIn makeover 3, I have used the ggExtra library to add distribution of the English and Math scores in the form of histograms at the margins of the plot. \n\n:::panel-tabset\n\n\n#### Makeover 2\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data=exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point(aes(color=SCIENCE)) +\n  ylim(0,100) +\n  xlim(0,100) +\n  geom_vline(xintercept=50, linetype='dashed') +\n  geom_hline(yintercept=50, linetype='dashed') +\n  ggtitle('Scatterplot of English and Math scores') +\n  theme_minimal() +\n  theme(legend.position='bottom') +\n  scale_color_gradient(low=\"darkgreen\", high=\"green\")\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n#### Makeover 3\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(ggExtra)\n\nggMarginal(ggplot(data=exam_data,\n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point(aes(color=SCIENCE)) +\n  ylim(0,100) +\n  xlim(0,100) +\n  geom_vline(xintercept=50, linetype='dashed') +\n  geom_hline(yintercept=50, linetype='dashed') +\n  ggtitle('Scatterplot of English and Math scores') +\n  theme_minimal() +\n  theme(legend.position='bottom') +\n  scale_color_gradient(low=\"darkgreen\", high=\"green\"), \n  \n  type=\"histogram\", fill =4)\n```\n\n::: {.cell-output-display}\n![](In-class_Ex01_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\nReference:\n['How to change ggplot2 colours manually and automatically?'](http://www.sthda.com/english/wiki/ggplot2-colors-how-to-change-colors-automatically-and-manually)\n\n:::\n\n",
    "supporting": [
      "In-class_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}