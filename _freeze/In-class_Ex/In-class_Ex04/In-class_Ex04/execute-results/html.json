{
  "hash": "a1d5a3229754f89d7562409e3548fce6",
  "result": {
    "markdown": "---\ntitle: \"In-class_Ex04\"\nauthor: \"NeoYX\"\ndate: '5 May 2023'\ndate-modified: \"2023-05-06\"\neditor: visual\nexecute: \n  freeze: auto\n  warning: false\n  #echo: false\n  #message: false\n  html:\n    code-fold: True\n    code-overflow: scroll\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n---\n\n\nIn today's in class exercise, Prof shared with us how to combine a qqplot and tabular results of Shapiro test in a single plot.\n\n## Import libraries\n\nThe new libraries used today are :\n\n-   [rstatic](https://rpkgs.datanovia.com/rstatix/): Allows us to perform basic statistical tests, including t-test, Wilcoxon test, ANOVA, Kruskal-Wallis and correlation analyses.\n\n-   [gt()](https://gt.rstudio.com/) : starting from a tibble table, customise a table and export in various formats. Most importantly, it works with patch. We will save the tabular results from shapiro test as gt object and export using gtsave() into .png file later.\n\n    Note:\n\n-   Importing tidyverse: will automatically provide read_r() \\<- for read_csv()\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(rstatix, gt, patchwork,tidyverse,nortest)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nexam <- read_csv('C:/yixin-neo/ISSS608-VAA/Hands-on_Ex/Hands-on_Ex05/data/Exam_data.csv')\n```\n:::\n\n\n## Background info\n\n### The Anderson_darling test\n\nUsually, when we check for normality of a distribution, we can use the Anderson-darling test or the Shapiro test. Hitting the three commands below will give us the results, but no visualisation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nad.test(exam$ENGLISH)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tAnderson-Darling normality test\n\ndata:  exam$ENGLISH\nA = 4.3661, p-value = 7.341e-11\n```\n:::\n:::\n\n\n### The shapiro.test\n\nUsing shapiro.test will generate result as a HTML object.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshapiro.test(exam$ENGLISH)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tShapiro-Wilk normality test\n\ndata:  exam$ENGLISH\nW = 0.9543, p-value = 1.811e-08\n```\n:::\n:::\n\n\nUsing shapiro_test will generate result as a tibble object.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam %>% \n  shapiro_test(ENGLISH)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 Ã— 3\n  variable statistic            p\n  <chr>        <dbl>        <dbl>\n1 ENGLISH      0.954 0.0000000181\n```\n:::\n:::\n\n\n### QQplot\n\nWe can also generate the qqplot to check for normality. However qqplot does not print any p-values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam,\n       aes(sample=ENGLISH)) +  #<<< use a new argument call sample: el scores\n  stat_qq() +\n  stat_qq_line()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex04_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Task for today:\n\n### Combine qqplot with results from Shapiro-test.\n\nRecall that in hands-on 3, we use DT to create an interactive table , however it is not recognized by patchwork.\n\nWe start by storing the shapiro test in a tibble table as shown above. Then we will use the [gt()](https://gt.rstudio.com/) package and export it as a .png using gtsave().\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqq <- ggplot(exam,\n       aes(sample=ENGLISH)) +  #<<< use a new argument call sample: el scores\n  stat_qq() +\n  stat_qq_line()\n\nsw_t <- exam %>% \n  shapiro_test(ENGLISH) %>% gt()   #<<< make into a gt format (will give a nice table)  shapiro.test is not used here as it gives output in another format.\n\ntmp <- tempfile(fileext = '.png') # create  temp table\ngtsave(sw_t, tmp)  # use gtsave() to save sw_t into tmp folder\ntable_png <- png::readPNG(tmp, native = TRUE)\n\nqq+table_png\n```\n\n::: {.cell-output-display}\n![](In-class_Ex04_files/figure-html/unnamed-chunk-7-1.png){width=576}\n:::\n:::\n\n\nI tried to customise the gt() table.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqq <- ggplot(exam,\n       aes(sample=ENGLISH)) +  #<<< use a new argument call sample: el scores\n  stat_qq() +\n  stat_qq_line()\n\nsw_t <- exam %>% \n  shapiro_test(ENGLISH) %>% gt()  %>%  \n  tab_header(\n    title = 'Shapiro Test for Normality',\n    subtitle = 'English scores')\n\ntmp <- tempfile(fileext = '.png') # create  temp table\ngtsave(sw_t, tmp)  # use gtsave() to save sw_t into tmp folder\ntable_png <- png::readPNG(tmp, native = TRUE)\n\nqq+table_png  # use patchwork to stitch\n```\n\n::: {.cell-output-display}\n![](In-class_Ex04_files/figure-html/unnamed-chunk-8-1.png){width=576}\n:::\n:::\n\n\nThe results of the Shapiro test shows that p-value \\< 0.05 and we have enough statistical evidence to reject the null hypothesis and conclude that English scores do not follow normal distribution.\n",
    "supporting": [
      "In-class_Ex04_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}