{
  "hash": "228abf77cd077a41482559d7371a248b",
  "result": {
    "markdown": "---\ntitle: \"Hands-on_Ex06\"\nauthor: \"NeoYX\"\ndate: '5 May 2023'\ndate-modified: \"2023-05-06\"\neditor: visual\nexecute: \n  freeze: auto\n  warning: false\n  #echo: false\n  #message: false\n  html:\n    code-fold: True\n    code-overflow: scroll\n    code-summary: \"Show the code\"\n    code-line-numbers: true\n---\n\n\n# 10Â  Visualising Uncertainty\n\n## 10.1 Learning Outcome\n\n## 10.2 Visualizing the uncertainty of point estimates\n\n-   A point estimate is a single number, such as a mean.\n\nUncertainty is expressed as standard error, confidence interval, or credible interval\n\n::: callout-important\nDon't confuse the uncertainty of a point estimate (mean, median..) with the variation in the sample (standard deviation sigma, and variation sigma square etc).\n\nThe standard deviation measures the variation of the values from the mean of ONE sample.\n\nThe standard error is the standard deviation of both sides of the 'mother of all means' of all the sample means. \\<- refer lecture 4 slide 23\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, plotly, crosstalk, DT, ggdist, gganimate)\n```\n:::\n\n\n-   [**DT**](https://rstudio.github.io/DT/) provides an R interface to the JavaScript library [DataTables](https://datatables.net/) that create interactive table on html page.\n\n-   [Crosstalk](https://rstudio.github.io/crosstalk/) is an add-on to the htmlwidgets package. It extends htmlwidgets with a set of classes, functions, and conventions for implementing cross-widget interactions (currently, linked brushing and filtering).\n\n-   [ggdist](https://mjskay.github.io/ggdist/) is an R package that provides a flexible set of `ggplot2` geoms and stats designed especially for **visualizing** distributions and uncertainty.\n\n    Lets load the student exam data.csv\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam <- read_csv('C:/yixin-neo/ISSS608-VAA/Hands-on_Ex/Hands-on_Ex05/data/Exam_data.csv')\n```\n:::\n\n\n### 10.2.1 Visualizing the uncertainty of point estimates: Manual calculation and creating of my_sum table\n\nThe code chunk below performs the followings:\n\n-   group the observation by RACE,\n\n-   computes the count of observations, mean, standard deviation and standard error of Maths by RACE, and\n\n-   save the output as a tibble data table called `my_sum`.\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    my_sum <- exam %>% \n      group_by(RACE) %>% \n      summarise(n=n(),\n                mean=mean(MATHS),\n                sd = sd(MATHS)) %>% \n      mutate(se=sd/sqrt(n-1))   #<<< standard error formula\n    ```\n    :::\n\n\nRefer to lecture 4 slide 20 for mathematical formula explanation.\n\nmy_sum is specially created for visualisation later using ggplot2.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(head(my_sum), format = 'html')\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> RACE </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> mean </th>\n   <th style=\"text-align:right;\"> sd </th>\n   <th style=\"text-align:right;\"> se </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Chinese </td>\n   <td style=\"text-align:right;\"> 193 </td>\n   <td style=\"text-align:right;\"> 76.50777 </td>\n   <td style=\"text-align:right;\"> 15.69040 </td>\n   <td style=\"text-align:right;\"> 1.132357 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Indian </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 60.66667 </td>\n   <td style=\"text-align:right;\"> 23.35237 </td>\n   <td style=\"text-align:right;\"> 7.041005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Malay </td>\n   <td style=\"text-align:right;\"> 108 </td>\n   <td style=\"text-align:right;\"> 57.44444 </td>\n   <td style=\"text-align:right;\"> 21.13478 </td>\n   <td style=\"text-align:right;\"> 2.043177 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Others </td>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:right;\"> 69.66667 </td>\n   <td style=\"text-align:right;\"> 10.72381 </td>\n   <td style=\"text-align:right;\"> 3.791438 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### 10.2.2 Visualizing the uncertainty of point estimates: Use my_sum table and ggplot2 methods to plot uncertainty\n\nThe code chunk below is used to reveal the **standard error** of **mean** maths score by race. It shows **one** standard deviation away from the 'mother of all means' for all the means from all the samples.\n\n::: callout-note\nStandard error is a measure of the variation of the mean of all the means from all samples of an underlying distribution.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(aes(x=RACE,\n                    ymin=mean-se,\n                    ymax=mean+se),\n                width = 0.2,\n                colour = 'black',\n                alpha = 0.9,\n                size=0.5) +\n    geom_point(aes(x=RACE,\n                 y=mean),\n             stat = 'identity', #<<< actual points refer to mean \n             color='red', \n             size = 1.5,\n             alpha = 1) + \n  ggtitle('Standard error of mean maths score by race')\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex06_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n::: callout-note\nIn the code above, **`stat = 'identity'`** means that the **`y`** values in the **`geom_point`** layer correspond to the **actual values** in the data frame, rather than a summary statistic like mean or median.\n:::\n\n### 10.2.3 Visualizing the uncertainty of point estimates: **ggplot2** methods\n\nLets plot a 95% confidence interval of mean maths score by race. The error bars should be sorted by the average maths scores. (Refer to take-home ex 1 on sorting by mean)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(aes(x=reorder(RACE,-mean),\n                    ymin=mean-1.96*se,    #<<<<\n                    ymax=mean+ 1.96*se),  #<<<<\n                width = 0.2,\n                colour = 'black',\n                alpha = 0.9,\n                size=0.5) +\n    geom_point(aes(x=RACE,\n                 y=mean),\n             stat = 'identity', #<<< actual points refer to mean \n             color='red', \n             size = 1.5,\n             alpha = 1) + \n  ggtitle('Standard error of mean maths score by race')\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex06_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n::: callout-note\n## What is the difference between standard error plot above and this 95% confidence interval plot?\n\nEarlier , we plot error bars of 1 standard deviation away from the mother of all means.\n\nHere, we are plotting 1.96 \\* standard deviation away from the mother of all means. The higher the % CI, the greater the margin or error.\n:::\n",
    "supporting": [
      "Hands-on_Ex06_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}